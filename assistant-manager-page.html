[file name]: assistant-manager-page.html
[file content begin]
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Manager Dashboard - FOMD Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Include jsPDF library for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <header>
        <div class="container header-container">
            <div class="logo">FOMD <span>Portal</span></div>
            <div class="header-info">
                <div id="current-datetime" class="datetime"></div>
            </div>
            <div class="nav-links">
                <a href="index.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Main
                </a>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h2>Assistant Manager Dashboard</h2>
                    <p class="welcome-message">Welcome, Assistant Manager!</p>
                    <p class="user-level">Access Level: <span class="user-level-badge level-assistant-manager">Assistant Manager</span></p>
                </div>
            </div>

            <div class="user-cards">
                <div class="user-card">
                    <h3><i class="fas fa-tasks"></i> Daily Operations</h3>
                    <p>Monitor daily operational activities and schedules</p>
                    <button class="btn btn-primary">View Operations</button>
                </div>
                <div class="user-card">
                    <h3><i class="fas fa-clipboard-check"></i> Work Orders</h3>
                    <p>Review and approve maintenance work orders</p>
                    <button class="btn btn-primary">Manage Orders</button>
                </div>
                <div class="user-card">
                    <h3><i class="fas fa-calendar-alt"></i> Scheduling</h3>
                    <p>Manage staff schedules and shift assignments</p>
                    <button class="btn btn-primary">View Schedule</button>
                </div>
            </div>

            <!-- Tabs for Assistant Manager -->
            <div class="admin-tabs">
                <button class="tab-button active" data-tab="pending-approvals">Pending Approvals</button>
                <button class="tab-button" data-tab="personnel-masterlist">Personnel Masterlist</button>
            </div>
            
            <!-- Pending Approvals Tab -->
            <div id="pending-approvals" class="tab-content active">
                <div class="dashboard-section">
                    <h3 class="section-title">Pending Approvals</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Work Order</th>
                                    <th>Section</th>
                                    <th>Requested By</th>
                                    <th>Priority</th>
                                    <th>Date Submitted</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>WO-2023-0456</td>
                                    <td>PF1 Line Maintenance</td>
                                    <td>John Smith</td>
                                    <td><span class="status-badge status-pending">High</span></td>
                                    <td>2023-10-25</td>
                                    <td>
                                        <button class="btn btn-success btn-small">Approve</button>
                                        <button class="btn btn-secondary btn-small">Review</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>WO-2023-0457</td>
                                    <td>Water Processing</td>
                                    <td>Sarah Johnson</td>
                                    <td><span class="status-badge status-approved">Medium</span></td>
                                    <td>2023-10-24</td>
                                    <td>
                                        <button class="btn btn-success btn-small">Approve</button>
                                        <button class="btn btn-secondary btn-small">Review</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Personnel Masterlist Tab -->
            <div id="personnel-masterlist" class="tab-content">
                <div class="dashboard-section">
                    <div class="section-header">
                        <h3 class="section-title">Personnel Masterlist</h3>
                        <button class="btn btn-primary" id="export-pdf-btn">
                            <i class="fas fa-file-pdf"></i> Export to PDF
                        </button>
                    </div>
                    
                    <!-- Search and Filter Controls -->
                    <div class="filter-controls">
                        <div class="search-box">
                            <input type="text" id="personnel-search" placeholder="Search by name...">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="filter-group">
                            <select id="section-filter">
                                <option value="">All Sections</option>
                                <option value="PF1 Line Maintenance">PF1 Line Maintenance</option>
                                <option value="PF1 Utilities Operation & Maint.">PF1 Utilities Operation & Maint.</option>
                                <option value="PF2 Line Maintenance">PF2 Line Maintenance</option>
                                <option value="PF1 HSRO Facility">PF1 HSRO Facility</option>
                                <option value="PF2 Utilities Operation & Maint.">PF2 Utilities Operation & Maint.</option>
                                <option value="PF3 Line Maintenance">PF3 Line Maintenance</option>
                                <option value="PF3 Utilities Operation & Maint.">PF3 Utilities Operation & Maint.</option>
                                <option value="Water Processing Facility">Water Processing Facility</option>
                            </select>
                            <select id="employment-status-filter">
                                <option value="">All Statuses</option>
                                <option value="Regular">Regular</option>
                                <option value="Probationary">Probationary</option>
                                <option value="Temporary">Temporary</option>
                            </select>
                            <select id="position-filter">
                                <option value="">All Positions</option>
                                <option value="Department Head">Department Head</option>
                                <option value="Assistant Department Head">Assistant Department Head</option>
                                <option value="Department Secretary">Department Secretary</option>
                                <option value="Section Supervisor">Section Supervisor</option>
                                <option value="Assistant Section Supervisor">Assistant Section Supervisor</option>
                                <option value="Chemical Engineer">Chemical Engineer</option>
                                <option value="Process Operator">Process Operator</option>
                                <option value="Maintenance Technician">Maintenance Technician</option>
                                <option value="Aide">Aide</option>
                            </select>
                            <button class="btn btn-secondary" id="reset-filters-btn">
                                <i class="fas fa-redo"></i> Reset Filters
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="personnel-masterlist-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>ID Number</th>
                                    <th>Date Hired</th>
                                    <th>Employment Status</th>
                                    <th>Current Position</th>
                                    <th>Work Status</th>
                                    <th>Section Assignment</th>
                                </tr>
                            </thead>
                            <tbody id="personnel-masterlist-table-body">
                                <!-- Personnel data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="no-results-message" style="display: none; text-align: center; padding: 20px;">
                        No personnel records match your search criteria.
                    </div>
                </div>
            </div>
        </section>
    </main>

    <style>
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .search-box {
            position: relative;
            flex: 1;
            min-width: 250px;
        }
        
        .search-box input {
            padding-right: 40px;
        }
        
        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--support);
        }
        
        .filter-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        
        .filter-group select {
            min-width: 180px;
        }
        
        @media (max-width: 768px) {
            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .filter-group select {
                min-width: 0;
                flex: 1;
            }
        }
    </style>

    <script>
        // Initialize datetime
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            document.getElementById('current-datetime').textContent = now.toLocaleDateString('en-US', options);
        }

        setInterval(updateDateTime, 1000);
        updateDateTime();

        // Personnel Masterlist Functions
        document.addEventListener('DOMContentLoaded', function() {
            // Load personnel data
            loadPersonnelData();
            
            // Add event listeners
            document.getElementById('export-pdf-btn').addEventListener('click', exportToPDF);
            document.getElementById('personnel-search').addEventListener('input', filterPersonnel);
            document.getElementById('section-filter').addEventListener('change', filterPersonnel);
            document.getElementById('employment-status-filter').addEventListener('change', filterPersonnel);
            document.getElementById('position-filter').addEventListener('change', filterPersonnel);
            document.getElementById('reset-filters-btn').addEventListener('click', resetFilters);
            
            // Tab functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to current button and content
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        });

        function loadPersonnelData() {
            try {
                // Get personnel data from localStorage
                const personnelData = localStorage.getItem('fomd_personnel_data');
                const personnel = personnelData ? JSON.parse(personnelData) : [];
                
                // Store the full dataset for filtering
                window.allPersonnelData = personnel;
                
                // Render the table with all data initially
                renderPersonnelTable(personnel);
            } catch (error) {
                console.error('Error loading personnel data:', error);
                const tableBody = document.getElementById('personnel-masterlist-table-body');
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center;">Error loading personnel data</td>
                    </tr>
                `;
            }
        }

        function renderPersonnelTable(personnel) {
            const tableBody = document.getElementById('personnel-masterlist-table-body');
            const noResultsMessage = document.getElementById('no-results-message');
            
            tableBody.innerHTML = '';
            
            if (personnel.length === 0) {
                tableBody.innerHTML = '';
                noResultsMessage.style.display = 'block';
                return;
            }
            
            noResultsMessage.style.display = 'none';
            
            // Sort personnel by family name
            const sortedPersonnel = [...personnel].sort((a, b) => 
                a.familyName.localeCompare(b.familyName)
            );
            
            sortedPersonnel.forEach(person => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${person.familyName}, ${person.firstName} ${person.middleName || ''}</td>
                    <td>${person.idNumber}</td>
                    <td>${formatDate(person.dateHired)}</td>
                    <td>${person.employmentStatus}</td>
                    <td>${person.currentPosition}</td>
                    <td>${person.workStatus}</td>
                    <td>${person.sectionAssignment}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function filterPersonnel() {
            const searchTerm = document.getElementById('personnel-search').value.toLowerCase();
            const sectionFilter = document.getElementById('section-filter').value;
            const statusFilter = document.getElementById('employment-status-filter').value;
            const positionFilter = document.getElementById('position-filter').value;
            
            const filteredPersonnel = window.allPersonnelData.filter(person => {
                // Search filter
                const fullName = `${person.familyName} ${person.firstName} ${person.middleName || ''}`.toLowerCase();
                const matchesSearch = !searchTerm || fullName.includes(searchTerm);
                
                // Section filter
                const matchesSection = !sectionFilter || person.sectionAssignment === sectionFilter;
                
                // Employment status filter
                const matchesStatus = !statusFilter || person.employmentStatus === statusFilter;
                
                // Position filter
                const matchesPosition = !positionFilter || person.currentPosition === positionFilter;
                
                return matchesSearch && matchesSection && matchesStatus && matchesPosition;
            });
            
            renderPersonnelTable(filteredPersonnel);
        }

        function resetFilters() {
            document.getElementById('personnel-search').value = '';
            document.getElementById('section-filter').value = '';
            document.getElementById('employment-status-filter').value = '';
            document.getElementById('position-filter').value = '';
            
            renderPersonnelTable(window.allPersonnelData);
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        function exportToPDF() {
            try {
                // Get current filtered data or all data
                const tableBody = document.getElementById('personnel-masterlist-table-body');
                const rows = tableBody.querySelectorAll('tr');
                
                if (rows.length === 0) {
                    alert('No personnel data available to export.');
                    return;
                }
                
                // Create PDF document
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(16);
                doc.text('FOMD Personnel Masterlist', 14, 15);
                
                // Add export date and filters info
                doc.setFontSize(10);
                doc.text(`Exported on: ${new Date().toLocaleDateString()}`, 14, 22);
                
                // Extract table data
                const tableData = [];
                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    const rowData = Array.from(cells).map(cell => cell.textContent);
                    tableData.push(rowData);
                });
                
                // Add table
                doc.autoTable({
                    startY: 30,
                    head: [['Name', 'ID Number', 'Date Hired', 'Employment Status', 'Current Position', 'Work Status', 'Section Assignment']],
                    body: tableData,
                    theme: 'grid',
                    styles: { fontSize: 8 },
                    headStyles: { fillColor: [74, 144, 164] },
                    margin: { top: 30 }
                });
                
                // Save the PDF
                doc.save(`FOMD_Personnel_Masterlist_${new Date().toISOString().split('T')[0]}.pdf`);
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
            }
        }
    </script>
</body>
</html>
[file content end]